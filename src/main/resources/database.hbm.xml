<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" [
    <!ENTITY types SYSTEM "classpath://your/domain/types.xml">
]>

<hibernate-mapping package="org.iplantc.treedata.model">
    <typedef class="org.iplantc.de.server.StringEnumUserType" name="jobStateType">
        <param name="enumClassname">org.iplantc.jobs.model.JobState</param>
    </typedef>

    <typedef class="org.iplantc.de.server.StringEnumUserType" name="fileStatus">
        <param name="enumClassname">org.iplantc.treedata.model.FileStatus</param>
    </typedef>

	<class name="Predicate" table="predicate_lookup">
		<id name="id" column="id" />

		<property name="description" />
	</class>

	<class name="Folder" table="folder">
		<id name="id" column="id">
            <generator class="org.iplantc.hibernate.id.SharedSequenceStyleGenerator">
            	<param name="name">mo_id_generator</param>
            	<param name="force_table_use">true</param>
                <param name="optimizer">pooled</param>
                <param name="initial_value">256</param>
                <param name="increment_size">256</param>
            </generator>
		</id>

		<property name="label" />

		<set name="subfolders" table="folder_folder">
			<key column="parent_folder_id"/>
			<many-to-many column="child_folder_id" class="Folder" />
		</set>

		<join table="folder_folder"
              inverse="true"
              optional="true">
              <key column="child_folder_id"/>
              <many-to-one name="parentFolder"
                           column="parent_folder_id"
                           not-null="false"/>
        </join>

	</class>
</hibernate-mapping>
